{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alex\\\\Desktop\\\\PI-CI0128-Grupo-X\\\\client\\\\src\\\\pages\\\\Reservation.jsx\",\n  _s = $RefreshSig$();\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect, useContext } from 'react';\nimport '../styles.scss';\nimport 'react-calendar/dist/Calendar.css';\nimport '../calendar.scss';\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport Calendar from 'react-calendar';\nimport { Context } from '../Context.js';\nimport { showErrorDialog } from '../Misc.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Reservation = () => {\n  _s();\n  const [date, setDate] = useState(null);\n  const {\n    changeCheckInDate\n  } = useContext(Context);\n  const {\n    changeCheckOutDate\n  } = useContext(Context);\n  const [reservations, setReservations] = useState([]);\n  const {\n    lastRoomClickedID\n  } = useContext(Context);\n  const fetchReservations = async () => {\n    try {\n      const response = await axios.get(`/reservations/get_reservations_by_room_id${lastRoomClickedID}`);\n      setReservations(response.data);\n    } catch (error) {\n      console.error('Error fetching reservations:', error);\n    }\n  };\n  useEffect(() => {\n    fetchReservations();\n  }, []);\n  const navigate = useNavigate();\n  const handleReserve = async e => {\n    e.preventDefault();\n    changeCheckInDate(date[0].toISOString().slice(0, 19).replace('T', ' '));\n    changeCheckOutDate(date[1].toISOString().slice(0, 19).replace('T', ' '));\n    navigate(\"/pay\");\n  };\n  function dateRangeCheck(showDialog) {\n    for (const reservation of reservations) {\n      const checkInDate = new Date(reservation.check_in);\n      const checkOutDate = new Date(reservation.check_out);\n      if (date[1] >= checkInDate && date[0] <= checkOutDate) {\n        document.getElementById(\"calendar-container-1\").value = new Date();\n        if (showDialog) {\n          showErrorDialog(\"Error: \", \"The chosen date range is already occupied, please select a new one.\");\n        }\n        return false;\n      }\n    }\n    return true;\n  }\n  const tileDisabled = ({\n    date\n  }) => {\n    for (const reservation of reservations) {\n      const checkInDate = new Date(reservation.check_in);\n      const checkOutDate = new Date(reservation.check_out);\n      if (date >= checkInDate && date <= checkOutDate) {\n        return true;\n      }\n    }\n    const today = new Date();\n    return date < today;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body\",\n    children: [date && date.length > 0 && dateRangeCheck(true) ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-calendar\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"text-date\",\n        children: [\"Fecha llegada: \", date[0].getDate(), \"/\", date[0].getMonth() + 1, \"/\", date[0].getFullYear()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"text-date\",\n        children: [\"Fecha salida:  \", date[1].getDate(), \"/\", date[1].getMonth() + 1, \"/\", date[1].getFullYear()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-calendar\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-date\",\n        children: \"Fecha llegada: --/--/----\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-date\",\n        children: \"Fecha salida: --/--/----\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"calendar-container\",\n      id: \"calendar-container-1\",\n      children: /*#__PURE__*/_jsxDEV(Calendar, {\n        onChange: setDate,\n        value: date,\n        selectRange: true,\n        tileDisabled: tileDisabled\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `${!(date && date.length > 0 && dateRangeCheck(false)) ? 'disabled-button' : 'calendar-button'}`,\n      onClick: handleReserve,\n      disabled: !(date && date.length > 0 && dateRangeCheck(false)),\n      children: /*#__PURE__*/_jsxDEV(\"center\", {\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(Reservation, \"F5lB2B/xUDPMO6Auwhb/DQvbblw=\", false, function () {\n  return [useNavigate];\n});\n_c = Reservation;\nexport default Reservation;\nvar _c;\n$RefreshReg$(_c, \"Reservation\");","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","useNavigate","Calendar","Context","showErrorDialog","jsxDEV","_jsxDEV","Reservation","_s","date","setDate","changeCheckInDate","changeCheckOutDate","reservations","setReservations","lastRoomClickedID","fetchReservations","response","get","data","error","console","navigate","handleReserve","e","preventDefault","toISOString","slice","replace","dateRangeCheck","showDialog","reservation","checkInDate","Date","check_in","checkOutDate","check_out","document","getElementById","value","tileDisabled","today","className","children","length","getDate","getMonth","getFullYear","fileName","_jsxFileName","lineNumber","columnNumber","id","onChange","selectRange","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Alex/Desktop/PI-CI0128-Grupo-X/client/src/pages/Reservation.jsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect, useContext } from 'react'\r\nimport '../styles.scss';\r\nimport 'react-calendar/dist/Calendar.css';\r\nimport '../calendar.scss';\r\nimport axios from \"axios\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport Calendar from 'react-calendar';\r\nimport { Context } from '../Context.js';\r\nimport { showErrorDialog } from '../Misc.js';\r\n\r\nconst Reservation = () => {\r\n  const [date, setDate] = useState(null);\r\n  const { changeCheckInDate } = useContext(Context);\r\n  const { changeCheckOutDate } = useContext(Context);\r\n  const [reservations, setReservations] = useState([]);\r\n  const { lastRoomClickedID } = useContext(Context);\r\n\r\n  const fetchReservations = async () => {\r\n    try {\r\n      const response = await axios.get(`/reservations/get_reservations_by_room_id${lastRoomClickedID}`);\r\n      setReservations(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching reservations:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchReservations();\r\n  }, []);\r\n\r\n  const navigate = useNavigate()\r\n  const handleReserve = async e => {\r\n    e.preventDefault()\r\n    changeCheckInDate(date[0].toISOString().slice(0, 19).replace('T', ' '))\r\n    changeCheckOutDate(date[1].toISOString().slice(0, 19).replace('T', ' '))\r\n    navigate(\"/pay\")\r\n  }\r\n\r\n  function dateRangeCheck(showDialog) {\r\n    for (const reservation of reservations) {\r\n      const checkInDate = new Date(reservation.check_in);\r\n      const checkOutDate = new Date(reservation.check_out);\r\n\r\n      if (date[1] >= checkInDate && date[0] <= checkOutDate) {\r\n        document.getElementById(\"calendar-container-1\").value = new Date();\r\n        if (showDialog) {\r\n          showErrorDialog(\"Error: \", \"The chosen date range is already occupied, please select a new one.\")\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  const tileDisabled = ({ date }) => {\r\n    for (const reservation of reservations) {\r\n      const checkInDate = new Date(reservation.check_in);\r\n      const checkOutDate = new Date(reservation.check_out);\r\n\r\n      if (date >= checkInDate && date <= checkOutDate) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    const today = new Date();\r\n    return date < today;\r\n  };\r\n\r\n  return (\r\n    <div className='body'>\r\n      {date && date.length > 0 && dateRangeCheck(true) ? (\r\n        <div className='text-calendar'>\r\n          <label className='text-date'>Fecha llegada: {date[0].getDate()}/{date[0].getMonth() + 1}/{date[0].getFullYear()}</label>\r\n          <label className='text-date'>Fecha salida:  {date[1].getDate()}/{date[1].getMonth() + 1}/{date[1].getFullYear()}</label>\r\n        </div>\r\n      ) : (\r\n        <div className='text-calendar'>\r\n          <span className='text-date'>Fecha llegada: --/--/----</span>\r\n          <span className='text-date'>Fecha salida: --/--/----</span>\r\n        </div>\r\n      )}\r\n      <div className='calendar-container' id=\"calendar-container-1\">\r\n        <Calendar\r\n          onChange={setDate}\r\n          value={date}\r\n          selectRange={true}\r\n          tileDisabled={tileDisabled}\r\n        />\r\n      </div>\r\n      <button className={`${!(date && date.length > 0 && dateRangeCheck(false)) ? 'disabled-button' : 'calendar-button'}`} onClick={handleReserve} disabled={!(date && date.length > 0 && dateRangeCheck(false))}>\r\n        <center>Next</center>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reservation;"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC9D,OAAO,gBAAgB;AACvB,OAAO,kCAAkC;AACzC,OAAO,kBAAkB;AACzB,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,QAAQ,MAAM,gBAAgB;AACrC,SAASC,OAAO,QAAQ,eAAe;AACvC,SAASC,eAAe,QAAQ,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7C,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM;IAAEc;EAAkB,CAAC,GAAGZ,UAAU,CAACI,OAAO,CAAC;EACjD,MAAM;IAAES;EAAmB,CAAC,GAAGb,UAAU,CAACI,OAAO,CAAC;EAClD,MAAM,CAACU,YAAY,EAAEC,eAAe,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM;IAAEkB;EAAkB,CAAC,GAAGhB,UAAU,CAACI,OAAO,CAAC;EAEjD,MAAMa,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAE,4CAA2CH,iBAAkB,EAAC,CAAC;MACjGD,eAAe,CAACG,QAAQ,CAACE,IAAI,CAAC;IAChC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;IACtD;EACF,CAAC;EAEDtB,SAAS,CAAC,MAAM;IACdkB,iBAAiB,CAAC,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMM,QAAQ,GAAGrB,WAAW,CAAC,CAAC;EAC9B,MAAMsB,aAAa,GAAG,MAAMC,CAAC,IAAI;IAC/BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBd,iBAAiB,CAACF,IAAI,CAAC,CAAC,CAAC,CAACiB,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IACvEhB,kBAAkB,CAACH,IAAI,CAAC,CAAC,CAAC,CAACiB,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IACxEN,QAAQ,CAAC,MAAM,CAAC;EAClB,CAAC;EAED,SAASO,cAAcA,CAACC,UAAU,EAAE;IAClC,KAAK,MAAMC,WAAW,IAAIlB,YAAY,EAAE;MACtC,MAAMmB,WAAW,GAAG,IAAIC,IAAI,CAACF,WAAW,CAACG,QAAQ,CAAC;MAClD,MAAMC,YAAY,GAAG,IAAIF,IAAI,CAACF,WAAW,CAACK,SAAS,CAAC;MAEpD,IAAI3B,IAAI,CAAC,CAAC,CAAC,IAAIuB,WAAW,IAAIvB,IAAI,CAAC,CAAC,CAAC,IAAI0B,YAAY,EAAE;QACrDE,QAAQ,CAACC,cAAc,CAAC,sBAAsB,CAAC,CAACC,KAAK,GAAG,IAAIN,IAAI,CAAC,CAAC;QAClE,IAAIH,UAAU,EAAE;UACd1B,eAAe,CAAC,SAAS,EAAE,qEAAqE,CAAC;QACnG;QACA,OAAO,KAAK;MACd;IACF;IAEA,OAAO,IAAI;EACb;EAEA,MAAMoC,YAAY,GAAGA,CAAC;IAAE/B;EAAK,CAAC,KAAK;IACjC,KAAK,MAAMsB,WAAW,IAAIlB,YAAY,EAAE;MACtC,MAAMmB,WAAW,GAAG,IAAIC,IAAI,CAACF,WAAW,CAACG,QAAQ,CAAC;MAClD,MAAMC,YAAY,GAAG,IAAIF,IAAI,CAACF,WAAW,CAACK,SAAS,CAAC;MAEpD,IAAI3B,IAAI,IAAIuB,WAAW,IAAIvB,IAAI,IAAI0B,YAAY,EAAE;QAC/C,OAAO,IAAI;MACb;IACF;IAEA,MAAMM,KAAK,GAAG,IAAIR,IAAI,CAAC,CAAC;IACxB,OAAOxB,IAAI,GAAGgC,KAAK;EACrB,CAAC;EAED,oBACEnC,OAAA;IAAKoC,SAAS,EAAC,MAAM;IAAAC,QAAA,GAClBlC,IAAI,IAAIA,IAAI,CAACmC,MAAM,GAAG,CAAC,IAAIf,cAAc,CAAC,IAAI,CAAC,gBAC9CvB,OAAA;MAAKoC,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAC5BrC,OAAA;QAAOoC,SAAS,EAAC,WAAW;QAAAC,QAAA,GAAC,iBAAe,EAAClC,IAAI,CAAC,CAAC,CAAC,CAACoC,OAAO,CAAC,CAAC,EAAC,GAAC,EAACpC,IAAI,CAAC,CAAC,CAAC,CAACqC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAC,GAAC,EAACrC,IAAI,CAAC,CAAC,CAAC,CAACsC,WAAW,CAAC,CAAC;MAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACxH7C,OAAA;QAAOoC,SAAS,EAAC,WAAW;QAAAC,QAAA,GAAC,iBAAe,EAAClC,IAAI,CAAC,CAAC,CAAC,CAACoC,OAAO,CAAC,CAAC,EAAC,GAAC,EAACpC,IAAI,CAAC,CAAC,CAAC,CAACqC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAC,GAAC,EAACrC,IAAI,CAAC,CAAC,CAAC,CAACsC,WAAW,CAAC,CAAC;MAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrH,CAAC,gBAEN7C,OAAA;MAAKoC,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAC5BrC,OAAA;QAAMoC,SAAS,EAAC,WAAW;QAAAC,QAAA,EAAC;MAAyB;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAC5D7C,OAAA;QAAMoC,SAAS,EAAC,WAAW;QAAAC,QAAA,EAAC;MAAwB;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxD,CACN,eACD7C,OAAA;MAAKoC,SAAS,EAAC,oBAAoB;MAACU,EAAE,EAAC,sBAAsB;MAAAT,QAAA,eAC3DrC,OAAA,CAACJ,QAAQ;QACPmD,QAAQ,EAAE3C,OAAQ;QAClB6B,KAAK,EAAE9B,IAAK;QACZ6C,WAAW,EAAE,IAAK;QAClBd,YAAY,EAAEA;MAAa;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5B;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eACN7C,OAAA;MAAQoC,SAAS,EAAG,GAAE,EAAEjC,IAAI,IAAIA,IAAI,CAACmC,MAAM,GAAG,CAAC,IAAIf,cAAc,CAAC,KAAK,CAAC,CAAC,GAAG,iBAAiB,GAAG,iBAAkB,EAAE;MAAC0B,OAAO,EAAEhC,aAAc;MAACiC,QAAQ,EAAE,EAAE/C,IAAI,IAAIA,IAAI,CAACmC,MAAM,GAAG,CAAC,IAAIf,cAAc,CAAC,KAAK,CAAC,CAAE;MAAAc,QAAA,eACzMrC,OAAA;QAAAqC,QAAA,EAAQ;MAAI;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACf,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV,CAAC;AAAC3C,EAAA,CArFID,WAAW;EAAA,QAoBEN,WAAW;AAAA;AAAAwD,EAAA,GApBxBlD,WAAW;AAuFjB,eAAeA,WAAW;AAAC,IAAAkD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}